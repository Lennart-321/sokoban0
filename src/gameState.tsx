export class GameState {
    width;
    height;
    board: number[]; //0-free, 1-man, 2-target, 4-box, 3-man+target, 6-box+target, 8-wall
    constructor(width: number, height: number, initialBoard: number[]) {
        this.width = width;
        this.height = height;
        this.board = initialBoard;
    }

    isSolved() {
        return this.board.findIndex(s => s === 4) < 0;
    }

    makeCopy(): GameState {
        return new GameState(this.width, this.height, this.board.slice());
    }
}

export const gameList: GameState[] = [];

// prettier-ignore
gameList.push(new GameState(
    8, 9,
    [
        8, 8, 8, 8, 8, 8, 8, 8,
        8, 8, 8, 0, 0, 0, 8, 8,
        8, 2, 1, 4, 0, 0, 8, 8,
        8, 8, 8, 0, 4, 2, 8, 8,
        8, 2, 8, 8, 4, 0, 8, 8,
        8, 0, 8, 0, 2, 0, 8, 8,
        8, 4, 0, 6, 4, 4, 2, 8,
        8, 0, 0, 0, 2, 0, 0, 8,
        8, 8, 8, 8, 8, 8, 8, 8,
    ]
));

// prettier-ignore
gameList.push(new GameState(
    29, 20,
    [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 8, 8, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 8, 8, 8, 8, 8, 8, 8, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 8, 8, 8, 8, 8, 8, 8, 0, 0, 8, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 8, 0, 0, 0, 8, 0, 8, 0, 8, 0, 8, 0, 8, 0, 0, 0, 8, 8, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 8, 0, 4, 0, 0, 0, 0, 0, 4, 0, 0, 8, 8, 0, 0, 4, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 8, 8, 8, 0, 4, 8, 0, 8, 0, 0, 8, 0, 8, 0, 0, 0, 0, 0, 8, 8, 8, 8, 8, 8, 8, 8, 8,
        0, 0, 8, 0, 0, 4, 0, 0, 8, 0, 0, 4, 8, 0, 8, 0, 4, 4, 0, 8, 0, 0, 0, 8, 0, 8, 0, 0, 8,
        0, 8, 8, 0, 8, 0, 0, 0, 8, 0, 0, 0, 0, 0, 8, 8, 8, 0, 0, 0, 0, 4, 0, 8, 0, 8, 0, 0, 8,
        0, 8, 0, 0, 8, 4, 0, 0, 0, 8, 0, 8, 8, 8, 0, 0, 8, 0, 0, 8, 0, 4, 4, 8, 0, 8, 0, 0, 8,
        0, 8, 0, 0, 0, 0, 4, 8, 8, 0, 0, 0, 0, 8, 0, 0, 0, 8, 8, 0, 4, 0, 0, 8, 0, 8, 0, 8, 8,
        8, 8, 8, 8, 4, 0, 4, 0, 8, 0, 0, 0, 0, 8, 8, 0, 0, 8, 0, 0, 0, 4, 0, 0, 0, 0, 2, 2, 8,
        8, 0, 0, 8, 0, 0, 0, 0, 8, 8, 8, 0, 8, 0, 4, 0, 4, 0, 8, 8, 8, 0, 0, 8, 8, 8, 2, 6, 8,
        8, 0, 0, 0, 0, 0, 8, 8, 0, 0, 4, 4, 0, 1, 0, 0, 4, 0, 0, 0, 0, 0, 8, 8, 2, 2, 2, 2, 8,
        8, 0, 0, 8, 8, 0, 0, 8, 8, 0, 0, 0, 4, 0, 0, 8, 4, 8, 0, 0, 8, 8, 2, 2, 2, 2, 6, 2, 8,
        8, 8, 0, 8, 0, 0, 4, 0, 0, 8, 0, 8, 0, 4, 8, 8, 0, 0, 8, 8, 2, 2, 2, 2, 6, 2, 8, 8, 8,
        8, 8, 0, 8, 8, 0, 0, 4, 0, 0, 8, 0, 4, 0, 8, 0, 0, 8, 2, 2, 2, 2, 6, 2, 8, 8, 8, 0, 0,
        8, 0, 0, 0, 0, 4, 0, 8, 8, 8, 8, 0, 0, 0, 8, 0, 2, 2, 2, 2, 6, 2, 8, 8, 8, 0, 0, 0, 0,
        8, 0, 0, 0, 8, 0, 0, 8, 0, 0, 8, 0, 0, 8, 0, 0, 2, 2, 6, 2, 8, 8, 8, 0, 0, 0, 0, 0, 0,
        8, 8, 8, 8, 8, 8, 8, 8, 0, 0, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 0, 0, 0, 0, 0, 0, 0, 0,
    ]
));

export default gameList;
export let currentGame: GameState = gameList[0].makeCopy();
export function setCurrentGame(gameIndex: number) {
    currentGame = gameList[gameIndex].makeCopy();
}
